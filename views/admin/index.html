<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Title -->
  <title>Dashboard</title>

  <!-- Styles -->
  <link href="https://fonts.googleapis.com/css?family=Poppins:400,500,700,800&display=swap" rel="stylesheet">


  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
    integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/1.5.5/css/perfect-scrollbar.css"
    integrity="sha512-2xznCEl5y5T5huJ2hCmwhvVtIGVF1j/aNUEJwi/BzpWPKEzsZPGpwnP1JrIMmjPpQaVicWOYVu8QvAIg9hwv9w=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />


  <!-- Theme Styles -->
  <link href="/admin/css/main.css" rel="stylesheet">
  <link href="/admin/css/custom.css" rel="stylesheet">
  <link rel="icon" type="image/x-icon" href="/images/fav.ico">

</head>

<body>

  <div class="page-container">
    <div class="page-header">
      <nav class="navbar navbar-expand-lg d-flex justify-content-between">
        <div class="" id="navbarNav">
          <ul class="navbar-nav" id="leftNav">
            <li class="nav-item">
              <a class="nav-link" id="sidebar-toggle" href="#"><i data-feather="arrow-left"></i></a>
            </li>
          </ul>
        </div>
        <div class="logo">
          <a class="navbar-brand" href="index.html"></a>
        </div>
        <div class="" id="headerNav">
          <ul class="navbar-nav">
            <li class="nav-item dropdown">
              <a onclick="logout()" class="dropdown-item" href="javascript:void(0);"><i data-feather="log-out" class="mx-2"></i> Logout</a>
            </li>
          </ul>
        </div>
      </nav>
    </div>

    <div class="page-sidebar">

      <ul class="list-unstyled accordion-menu">

        <li class="sidebar-title">
          Main
        </li>
        <li class="active-page">
          <a href="/admin/"><i class="fa-sharp fa-solid fa-house fa-xl"></i></i><span class="mx-4">Dashboard</span></a>
        </li>

        <li class="sidebar-title">
          Pumpers
        </li>
        <li class="">
          <a href="/admin/pumper"><i class="fas fa-gas-pump fa-xl"></i><span class="mx-4">All Pumpers</span></a>
        </li>

        <li class="sidebar-title">
          Manage Stock
        </li>
        <li class="">
          <a href="/admin/stock-update"><i class="fas fa-tint fa-xl"></i><span class="mx-4">Stock Update</span></a>
        </li>


      </ul>

    </div>


    <div class="page-content">
      <div class="main-wrapper">
        <div class="row">
          <div class="col-md-6 col-xl-3">
            <div class="card stat-widget">
              <div class="card-body">
                <h5 class="card-title">Stock Count</h5>
                <h6 id="stockCountPetrol"></h6>
                <h6 id="stockCountDeisel"></h6>
                <p class="mt-3">Petrol and Deisel</p>
                <div class="progress">
                  <div class="progress-bar bg-info progress-bar-striped" role="progressbar" style="width: 25%"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-xl-3">
            <div class="card stat-widget">
              <div class="card-body">
                <h5 class="card-title">Total Sale</h5>
                <h6 id="totalSalePetrol"></h6>
                <h6 id="totalSaleDeisel"></h6>
                <p class="mt-3">Petrol and Deisel</p>
                <div class="progress">
                  <div class="progress-bar bg-success progress-bar-striped" role="progressbar" style="width: 50%"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-xl-3">
            <div class="card stat-widget">
              <div class="card-body">
                <h5 class="card-title">Today Sale</h5>
                <h6 id="userCountPetrol"></h6>
                <h6 id="userCountDeisel"></h6>
                <p class="mt-3">Today Sale</p>
                <div class="progress">
                  <div class="progress-bar bg-danger progress-bar-striped" role="progressbar" style="width: 60%"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-xl-3">
            <div class="card stat-widget">
              <div class="card-body">
                <h5 class="card-title">Today Customers</h5>
                <h6 id="countPetrol"></h6>
                <h6 id="countDeisel"></h6>
                <p class="mt-3">Today Customers</p>
                <div class="progress">
                  <div class="progress-bar bg-primary progress-bar-striped" role="progressbar" style="width: 50%"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
    </div>
  </div>

  <!-- Javascripts -->
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
        integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
        crossorigin="anonymous"></script>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/1.5.5/perfect-scrollbar.min.js"
        integrity="sha512-X41/A5OSxoi5uqtS6Krhqz8QyyD8E/ZbN7B4IaBSgqPLRbWVuXJXr9UwOujstj71SoVxh5vxgy7kmtd17xrJRw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>


  <script src="/admin/js/main.min.js"></script>
  <script src="https://unpkg.com/feather-icons"></script>

  <script>

    $.get("/api/admin/analytics",function(data){
      console.log(data)
      document.getElementById("stockCountPetrol").innerHTML = 'Petrol : ' + data.stock.petrol + 'L';
      document.getElementById("stockCountDeisel").innerHTML = 'Deisel : ' + data.stock.deisel + 'L';

      document.getElementById("totalSalePetrol").innerHTML = 'Petrol : ' + data.totalSale.patrol + 'L';
      document.getElementById("totalSaleDeisel").innerHTML = 'Deisel : ' + data.totalSale.deisel + 'L';

      document.getElementById("userCountPetrol").innerHTML = 'Petrol : ' + data.count.patrol + 'L';
      document.getElementById("userCountDeisel").innerHTML = 'Deisel : ' + data.count.deisel + 'L';

      document.getElementById("countPetrol").innerHTML = 'Petrol : ' + data.userCount.patrol;
      document.getElementById("countDeisel").innerHTML = 'Deisel : ' + data.userCount.deisel;
    })

    function logout() {
      $.post('/api/logOut',
        {},
        function (data) {
          if (data.msg == "true" || data.msg == true) {
            location.href = "/admin/login";
          }
        }
      )
    }

  </script>
  
</body>

</html>